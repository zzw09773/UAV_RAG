# 🗺️ UAV RAG 系統 - 精簡路線圖

**專案版本**: v0.3.0 | **目標版本**: v1.0.0 (2026 Q2)  
**定位**: 提供 UAV 戰機設計領域的檢索增強式智慧助理,整合技術文檔、氣動參數計算與 DATCOM 生成。

---

## 🎯 願景與成功指標
- 建立可信賴的工程決策助手,兼顧檢索品質、DATCOM 生產力與安全合規。
- 量化目標 (最終版 v1.0.0):
  - 測試覆蓋率 ≥ 85%
  - P95 查詢延遲 ≤ 2 秒
  - 查詢成功率 ≥ 95%
  - 使用者滿意度 ≥ 4.5 / 5

---

## 📊 目前進度
- **階段**: Phase 1 (生產就緒基礎) 開發中。
- **已完成**: `.env.example` 統一環境變數範本。
- **待完成**: 測試基礎建設、安全強化、DATCOM 流程驗證、關鍵文件補齊。

---

## 🛣️ 里程碑概覽

| Phase | 時間 | 核心目標 | 主要交付物 | 狀態 |
| --- | --- | --- | --- | --- |
| **v0.4.0**<br>生產就緒基礎 | 2025/10 – 2025/11 | 打好測試與安全地基,鞏固 DATCOM 流程 | 測試覆蓋 ≥60%、安全防護、DATCOM 指南、健康檢查 | 進行中 |
| **v0.6.0**<br>功能擴展 | 2025/12 – 2026/01 | 提升效能與體驗,打造操作入口 | 快取與非同步、對話記憶、Web UI、結果重排序 | 排程中 |
| **v0.8.0**<br>企業級特性 | 2026/02 – 2026/03 | 監控、回饋、協作與多模態能力 | Prometheus/Grafana、回饋循環、權限管理、多模態解析 | 排程中 |
| **v1.0.0**<br>產品化發布 | 2026/04 – 2026/05 | 達成高可用與治理要求,正式上線 | K8s 部署、備援策略、壓力測試、安全審計、完整文件 | 排程中 |

---

## 🔍 里程碑重點

### Phase 1 – 生產就緒基礎 (v0.4.0)
**焦點**
- 測試: 建立 Pytest 架構、撰寫工具/流程單元測試、整合測試與 E2E 流程,覆蓋率提升至 60%。
- 安全: 計算器沙箱化、API 金鑰與速率限制、強制 SSL、輸入驗證, 並清除示範環境中的敏感值及導入秘密掃描。
- 文檔與運維: `DATCOM_USAGE.md`、部署/故障排除指南、健康檢查與環境驗證腳本。
- DATCOM 流程: 以現有 `DatcomParams` (Pydantic) 為基礎補強 `field_validator` 與範圍檢核、非 JSON 後備解析、工具錯誤即時中止、專屬測試。
- RAG 回覆: 問答結果需附上檢索文件來源 (檔名/段落) 與可追溯標註, 並新增測試確保 citation 存在。

**成功條件**
- 測試覆蓋率 ≥ 60%, CI 通過。
- DATCOM 輸出可處理錯誤輸入並清楚提示。
- 安全檢查無高風險項目。
- 文件足以支援新成員部署與操作。

### Phase 2 – 功能擴展與優化 (v0.6.0)
**焦點**
- 效能: 快取層、非同步檢索、批次優化、資料庫索引。
- 使用體驗: 對話記憶、Session 管理、ReAct 上下文優化。
- 介面: Web 原型 (聊天、來源引用、參數面板)。
- 結果品質: 重排序、相似度過濾、答案評估。

**成功條件**
- 查詢延遲改善至少 50%。
- 多輪對話穩定,歷史可查可清。
- Web 原型涵蓋核心任務。

### Phase 3 – 企業級特性 (v0.8.0)
**焦點**
- Observability: 結構化日誌、Prometheus/Grafana、OpenTelemetry。
- 使用者回饋: 評分系統、回饋分析、Prompt 改進流程。
- 多模態: 圖像/表格解析、視覺化輸出。
- 協作與治理: 角色權限、查詢共享、審計日誌。

### Phase 4 – 完整產品化 (v1.0.0)
**焦點**
- 知識版本管理與回溯。
- Kubernetes 高可用部署、自動擴展與備援。
- 壓力與安全測試。
- 使用者手冊、管理指南、培訓教材。

---

## 📈 關鍵指標 (KPI)

| 指標 | 現況 | v0.4 | v0.6 | v0.8 | v1.0 |
| --- | --- | --- | --- | --- | --- |
| 測試覆蓋率 | 10% | 60% | 70% | 80% | 85% |
| P95 查詢延遲 | ~5s | 3s | 2s | 1.5s | ≤2s |
| 快取命中率 | 0% | - | 40% | 60% | 70% |
| 查詢成功率 | 85% | 90% | 93% | 94% | 95% |
| 用戶滿意度 | - | 3.5/5 | 4.0/5 | 4.3/5 | 4.5/5 |

---

## 🚀 下一步行動 (Phase 1)
1. 建立測試框架並撰寫核心工具單元測試 (目標: 覆蓋率 30% 起跳)。
2. 安全強化: 替換計算器 `eval()`、導入 API 金鑰驗證與速率限制。
3. 編寫 `DATCOM_USAGE.md` 與 `docs/DEPLOYMENT.md`, 補齊健康檢查腳本。
4. 實作 DATCOM 參數驗證與 tool 錯誤處理, 撰寫對應自動化測試。
5. 清理 `.env.example` 示例金鑰並導入秘密掃描 (如 pre-commit `detect-secrets`/`trufflehog`)。
6. 調整 RAG 回覆流程: 結果需列出引用文件與段落, 併撰寫測試驗證 citation 存在。

---

## 🧭 參考文件
- `README.md` – 快速入門
- `AGENT.md` – 智能體架構
- `docs/DEVELOPER_GUIDE.md` – 系統設計詳述
- (待補) `docs/DATCOM_USAGE.md`, `docs/DEPLOYMENT.md`

---

📌 如需調整優先順序或新增項目,請先於 Issue 中提出,以便同步更新路線圖。
